class Solution:
    def buildTree(self, preorder, inorder):
        idx = 0
        map = {val: i for i, val in enumerate(inorder)}
        
        def helper(s, e):
            nonlocal idx
            if s > e:
                return None
            curr = preorder[idx]
            idx += 1
            root = TreeNode(curr)
            id = map[curr]
            root.left = helper(s, id - 1)
            root.right = helper(id + 1, e)
            return root

        return helper(0, len(inorder) - 1)
